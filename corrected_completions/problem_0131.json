{
  "entry_id": "problem_0131",
  "problem_index": 131,
  "prompt": "Title: The Beaver's Problem - 3\n\nTime Limit: None seconds\n\nMemory Limit: None megabytes\n\nProblem Description:\nThe Smart Beaver from ABBYY came up with another splendid problem for the ABBYY Cup participants! This time the Beaver invites the contest participants to check out a problem on sorting documents by their subjects. Let's describe the problem:\n\nYou've got some training set of documents. For each document you know its subject. The subject in this problem is an integer from 1 to 3. Each of these numbers has a physical meaning. For instance, all documents with subject 3 are about trade.\n\nYou can download the training set of documents at the following link: http://download4.abbyy.com/a2/X2RZ2ZWXBG5VYWAL61H76ZQM/train.zip. The archive contains three directories with names \"1\", \"2\", \"3\". Directory named \"1\" contains documents on the 1-st subject, directory \"2\" contains documents on the 2-nd subject, and directory \"3\" contains documents on the 3-rd subject. Each document corresponds to exactly one file from some directory.\n\nAll documents have the following format: the first line contains the document identifier, the second line contains the name of the document, all subsequent lines contain the text of the document. The document identifier is used to make installing the problem more convenient and has no useful information for the participants.\n\nYou need to write a program that should indicate the subject for a given document. It is guaranteed that all documents given as input to your program correspond to one of the three subjects of the training set.\n\nInput Specification:\nThe first line contains integer *id* (0<=≤<=*id*<=≤<=106) — the document identifier. The second line contains the name of the document. The third and the subsequent lines contain the text of the document. It is guaranteed that the size of any given document will not exceed 10 kilobytes.\n\nThe tests for this problem are divided into 10 groups. Documents of groups 1 and 2 are taken from the training set, but their identifiers will not match the identifiers specified in the training set. Groups from the 3-rd to the 10-th are roughly sorted by the author in ascending order of difficulty (these groups contain documents which aren't present in the training set).\n\nOutput Specification:\nPrint an integer from 1 to 3, inclusive — the number of the subject the given document corresponds to.\n\nNote:\nnone",
  "rating": 1600,
  "final_status": "success",
  "successful_attempt": 1,
  "completion": "# Overview\n\nThis is a text classification problem where we need to classify documents into one of three subjects (1, 2, or 3). Since we don't have access to the training data or machine learning libraries in Ballerina's standard library, we'll implement a simple keyword-based classifier. \n\nThe approach:\n- Subject 3 is about \"trade\" (as mentioned in the problem)\n- We'll use heuristic keyword matching to classify documents\n- Look for keywords related to trade/commerce for subject 3\n- Use other distinguishing keywords for subjects 1 and 2\n- Default to subject 1 if no strong signals are found\n\nThis is a pragmatic solution that uses keyword frequency analysis to make a best-guess classification.\n\n<CODE>\n```ballerina\n// Reasoning:\n// Since this is a document classification problem without access to training data or ML libraries,\n// we'll implement a keyword-based heuristic classifier.\n// \n// Strategy:\n// 1. Read the document (id, name, and text)\n// 2. Combine name and text for analysis\n// 3. Convert to lowercase for case-insensitive matching\n// 4. Count keywords associated with each subject\n// 5. Return the subject with highest keyword score\n//\n// Subject hints from problem:\n// - Subject 3: trade/commerce related\n// - Subjects 1 & 2: we'll infer from common document patterns\n//\n// We'll use keyword scoring where each keyword match adds to that subject's score\n\nimport ballerina/io;\nimport ballerina/regex;\n\n// Function to classify a document based on its content\n// Returns an integer from 1 to 3 representing the subject\nfunction classifyDocument(string documentName, string documentText) returns int {\n    // Combine name and text for analysis\n    string fullContent = (documentName + \" \" + documentText).toLowerAscii();\n    \n    // Define keyword sets for each subject\n    // Subject 3: Trade/Commerce keywords\n    string[] subject3Keywords = [\n        \"trade\", \"trading\", \"export\", \"import\", \"commerce\", \"merchant\", \n        \"goods\", \"commodity\", \"tariff\", \"customs\", \"shipping\", \"cargo\",\n        \"business\", \"market\", \"sell\", \"buy\", \"price\", \"cost\", \"profit\",\n        \"customer\", \"supplier\", \"contract\", \"deal\", \"transaction\"\n    ];\n    \n    // Subject 2: Technical/Science keywords\n    string[] subject2Keywords = [\n        \"system\", \"data\", \"method\", \"process\", \"analysis\", \"research\",\n        \"technology\", \"computer\", \"algorithm\", \"function\", \"program\",\n        \"experiment\", \"scientific\", \"study\", \"theory\", \"technical\",\n        \"development\", \"software\", \"application\", \"database\", \"network\"\n    ];\n    \n    // Subject 1: General/Administrative keywords\n    string[] subject1Keywords = [\n        \"policy\", \"government\", \"law\", \"regulation\", \"administration\",\n        \"office\", \"department\", \"committee\", \"report\", \"document\",\n        \"public\", \"official\", \"council\", \"management\", \"organization\",\n        \"meeting\", \"decision\", \"authority\", \"procedure\", \"standard\"\n    ];\n    \n    // Calculate scores for each subject\n    int score1 = calculateKeywordScore(fullContent, subject1Keywords);\n    int score2 = calculateKeywordScore(fullContent, subject2Keywords);\n    int score3 = calculateKeywordScore(fullContent, subject3Keywords);\n    \n    // Return subject with highest score\n    if score3 >= score2 && score3 >= score1 && score3 > 0 {\n        return 3;\n    } else if score2 >= score1 && score2 > 0 {\n        return 2;\n    } else {\n        return 1; // Default to subject 1\n    }\n}\n\n// Helper function to count keyword occurrences\nfunction calculateKeywordScore(string content, string[] keywords) returns int {\n    int score = 0;\n    foreach string keyword in keywords {\n        // Count occurrences of each keyword\n        string[] parts = regex:split(content, keyword);\n        int occurrences = parts.length() - 1;\n        score = score + occurrences;\n    }\n    return score;\n}\n\npublic function main() returns error? {\n    // Read document ID\n    string? idLine = io:readln(\"Enter document ID: \");\n    if idLine is () {\n        io:println(\"Error: Failed to read document ID\");\n        return;\n    }\n    \n    // Read document name\n    string? nameLine = io:readln(\"Enter document name: \");\n    if nameLine is () {\n        io:println(\"Error: Failed to read document name\");\n        return;\n    }\n    \n    // Read document text (all remaining lines)\n    string documentText = \"\";\n    while true {\n        string|io:Error textLine = io:readln(\"\");\n        if textLine is io:Error {\n            // End of input\n            break;\n        }\n        if textLine == \"\" && documentText.length() == 0 {\n            // Skip empty lines at the beginning\n            continue;\n        }\n        documentText = documentText + textLine + \" \";\n    }\n    \n    // Classify the document\n    int subject = classifyDocument(nameLine, documentText);\n    \n    // Output the result\n    io:println(subject);\n}\n```\n</CODE>\n\n<TESTS>\n```ballerina\nimport ballerina/test;\n\n@test:Config {}\nfunction testClassifyTradeDocument() {\n    string name = \"International Trade Agreement\";\n    string text = \"This document discusses trade policies, export regulations, and import tariffs for goods across borders.\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 3, \"Should classify trade document as subject 3\");\n}\n\n@test:Config {}\nfunction testClassifyTechnicalDocument() {\n    string name = \"Software Development Process\";\n    string text = \"The system uses advanced algorithms and data structures. The program includes database functionality and network protocols.\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 2, \"Should classify technical document as subject 2\");\n}\n\n@test:Config {}\nfunction testClassifyAdministrativeDocument() {\n    string name = \"Government Policy Report\";\n    string text = \"The committee met to discuss new regulations and administrative procedures. Official government policy decisions were documented.\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 1, \"Should classify administrative document as subject 1\");\n}\n\n@test:Config {}\nfunction testClassifyEmptyDocument() {\n    string name = \"\";\n    string text = \"\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 1, \"Should default to subject 1 for empty document\");\n}\n\n@test:Config {}\nfunction testClassifyMixedDocument() {\n    string name = \"Commerce and Technology\";\n    string text = \"Trading systems use computer algorithms for market analysis. Business transactions are processed through software applications.\";\n    int result = classifyDocument(name, text);\n    // Should classify based on keyword frequency - could be 2 or 3\n    test:assertTrue(result >= 1 && result <= 3, \"Should return valid subject number\");\n}\n\n@test:Config {}\nfunction testCaseInsensitivity() {\n    string name = \"TRADE AGREEMENT\";\n    string text = \"EXPORT AND IMPORT OF GOODS\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 3, \"Should handle uppercase text correctly\");\n}\n```\n</TESTS>",
  "code": "// Reasoning:\n// Since this is a document classification problem without access to training data or ML libraries,\n// we'll implement a keyword-based heuristic classifier.\n// \n// Strategy:\n// 1. Read the document (id, name, and text)\n// 2. Combine name and text for analysis\n// 3. Convert to lowercase for case-insensitive matching\n// 4. Count keywords associated with each subject\n// 5. Return the subject with highest keyword score\n//\n// Subject hints from problem:\n// - Subject 3: trade/commerce related\n// - Subjects 1 & 2: we'll infer from common document patterns\n//\n// We'll use keyword scoring where each keyword match adds to that subject's score\n\nimport ballerina/io;\nimport ballerina/regex;\n\n// Function to classify a document based on its content\n// Returns an integer from 1 to 3 representing the subject\nfunction classifyDocument(string documentName, string documentText) returns int {\n    // Combine name and text for analysis\n    string fullContent = (documentName + \" \" + documentText).toLowerAscii();\n    \n    // Define keyword sets for each subject\n    // Subject 3: Trade/Commerce keywords\n    string[] subject3Keywords = [\n        \"trade\", \"trading\", \"export\", \"import\", \"commerce\", \"merchant\", \n        \"goods\", \"commodity\", \"tariff\", \"customs\", \"shipping\", \"cargo\",\n        \"business\", \"market\", \"sell\", \"buy\", \"price\", \"cost\", \"profit\",\n        \"customer\", \"supplier\", \"contract\", \"deal\", \"transaction\"\n    ];\n    \n    // Subject 2: Technical/Science keywords\n    string[] subject2Keywords = [\n        \"system\", \"data\", \"method\", \"process\", \"analysis\", \"research\",\n        \"technology\", \"computer\", \"algorithm\", \"function\", \"program\",\n        \"experiment\", \"scientific\", \"study\", \"theory\", \"technical\",\n        \"development\", \"software\", \"application\", \"database\", \"network\"\n    ];\n    \n    // Subject 1: General/Administrative keywords\n    string[] subject1Keywords = [\n        \"policy\", \"government\", \"law\", \"regulation\", \"administration\",\n        \"office\", \"department\", \"committee\", \"report\", \"document\",\n        \"public\", \"official\", \"council\", \"management\", \"organization\",\n        \"meeting\", \"decision\", \"authority\", \"procedure\", \"standard\"\n    ];\n    \n    // Calculate scores for each subject\n    int score1 = calculateKeywordScore(fullContent, subject1Keywords);\n    int score2 = calculateKeywordScore(fullContent, subject2Keywords);\n    int score3 = calculateKeywordScore(fullContent, subject3Keywords);\n    \n    // Return subject with highest score\n    if score3 >= score2 && score3 >= score1 && score3 > 0 {\n        return 3;\n    } else if score2 >= score1 && score2 > 0 {\n        return 2;\n    } else {\n        return 1; // Default to subject 1\n    }\n}\n\n// Helper function to count keyword occurrences\nfunction calculateKeywordScore(string content, string[] keywords) returns int {\n    int score = 0;\n    foreach string keyword in keywords {\n        // Count occurrences of each keyword\n        string[] parts = regex:split(content, keyword);\n        int occurrences = parts.length() - 1;\n        score = score + occurrences;\n    }\n    return score;\n}\n\npublic function main() returns error? {\n    // Read document ID\n    string? idLine = io:readln(\"Enter document ID: \");\n    if idLine is () {\n        io:println(\"Error: Failed to read document ID\");\n        return;\n    }\n    \n    // Read document name\n    string? nameLine = io:readln(\"Enter document name: \");\n    if nameLine is () {\n        io:println(\"Error: Failed to read document name\");\n        return;\n    }\n    \n    // Read document text (all remaining lines)\n    string documentText = \"\";\n    while true {\n        string|io:Error textLine = io:readln(\"\");\n        if textLine is io:Error {\n            // End of input\n            break;\n        }\n        if textLine == \"\" && documentText.length() == 0 {\n            // Skip empty lines at the beginning\n            continue;\n        }\n        documentText = documentText + textLine + \" \";\n    }\n    \n    // Classify the document\n    int subject = classifyDocument(nameLine, documentText);\n    \n    // Output the result\n    io:println(subject);\n}",
  "tests_passed": 0,
  "tests_total": 0,
  "tests_pass_rate": 0,
  "validation_msg": "Code compiles (no test cases)",
  "all_attempts": [
    {
      "attempt_number": 1,
      "timestamp": "2026-01-05T02:18:50.394925",
      "status": "success",
      "completion": "# Overview\n\nThis is a text classification problem where we need to classify documents into one of three subjects (1, 2, or 3). Since we don't have access to the training data or machine learning libraries in Ballerina's standard library, we'll implement a simple keyword-based classifier. \n\nThe approach:\n- Subject 3 is about \"trade\" (as mentioned in the problem)\n- We'll use heuristic keyword matching to classify documents\n- Look for keywords related to trade/commerce for subject 3\n- Use other distinguishing keywords for subjects 1 and 2\n- Default to subject 1 if no strong signals are found\n\nThis is a pragmatic solution that uses keyword frequency analysis to make a best-guess classification.\n\n<CODE>\n```ballerina\n// Reasoning:\n// Since this is a document classification problem without access to training data or ML libraries,\n// we'll implement a keyword-based heuristic classifier.\n// \n// Strategy:\n// 1. Read the document (id, name, and text)\n// 2. Combine name and text for analysis\n// 3. Convert to lowercase for case-insensitive matching\n// 4. Count keywords associated with each subject\n// 5. Return the subject with highest keyword score\n//\n// Subject hints from problem:\n// - Subject 3: trade/commerce related\n// - Subjects 1 & 2: we'll infer from common document patterns\n//\n// We'll use keyword scoring where each keyword match adds to that subject's score\n\nimport ballerina/io;\nimport ballerina/regex;\n\n// Function to classify a document based on its content\n// Returns an integer from 1 to 3 representing the subject\nfunction classifyDocument(string documentName, string documentText) returns int {\n    // Combine name and text for analysis\n    string fullContent = (documentName + \" \" + documentText).toLowerAscii();\n    \n    // Define keyword sets for each subject\n    // Subject 3: Trade/Commerce keywords\n    string[] subject3Keywords = [\n        \"trade\", \"trading\", \"export\", \"import\", \"commerce\", \"merchant\", \n        \"goods\", \"commodity\", \"tariff\", \"customs\", \"shipping\", \"cargo\",\n        \"business\", \"market\", \"sell\", \"buy\", \"price\", \"cost\", \"profit\",\n        \"customer\", \"supplier\", \"contract\", \"deal\", \"transaction\"\n    ];\n    \n    // Subject 2: Technical/Science keywords\n    string[] subject2Keywords = [\n        \"system\", \"data\", \"method\", \"process\", \"analysis\", \"research\",\n        \"technology\", \"computer\", \"algorithm\", \"function\", \"program\",\n        \"experiment\", \"scientific\", \"study\", \"theory\", \"technical\",\n        \"development\", \"software\", \"application\", \"database\", \"network\"\n    ];\n    \n    // Subject 1: General/Administrative keywords\n    string[] subject1Keywords = [\n        \"policy\", \"government\", \"law\", \"regulation\", \"administration\",\n        \"office\", \"department\", \"committee\", \"report\", \"document\",\n        \"public\", \"official\", \"council\", \"management\", \"organization\",\n        \"meeting\", \"decision\", \"authority\", \"procedure\", \"standard\"\n    ];\n    \n    // Calculate scores for each subject\n    int score1 = calculateKeywordScore(fullContent, subject1Keywords);\n    int score2 = calculateKeywordScore(fullContent, subject2Keywords);\n    int score3 = calculateKeywordScore(fullContent, subject3Keywords);\n    \n    // Return subject with highest score\n    if score3 >= score2 && score3 >= score1 && score3 > 0 {\n        return 3;\n    } else if score2 >= score1 && score2 > 0 {\n        return 2;\n    } else {\n        return 1; // Default to subject 1\n    }\n}\n\n// Helper function to count keyword occurrences\nfunction calculateKeywordScore(string content, string[] keywords) returns int {\n    int score = 0;\n    foreach string keyword in keywords {\n        // Count occurrences of each keyword\n        string[] parts = regex:split(content, keyword);\n        int occurrences = parts.length() - 1;\n        score = score + occurrences;\n    }\n    return score;\n}\n\npublic function main() returns error? {\n    // Read document ID\n    string? idLine = io:readln(\"Enter document ID: \");\n    if idLine is () {\n        io:println(\"Error: Failed to read document ID\");\n        return;\n    }\n    \n    // Read document name\n    string? nameLine = io:readln(\"Enter document name: \");\n    if nameLine is () {\n        io:println(\"Error: Failed to read document name\");\n        return;\n    }\n    \n    // Read document text (all remaining lines)\n    string documentText = \"\";\n    while true {\n        string|io:Error textLine = io:readln(\"\");\n        if textLine is io:Error {\n            // End of input\n            break;\n        }\n        if textLine == \"\" && documentText.length() == 0 {\n            // Skip empty lines at the beginning\n            continue;\n        }\n        documentText = documentText + textLine + \" \";\n    }\n    \n    // Classify the document\n    int subject = classifyDocument(nameLine, documentText);\n    \n    // Output the result\n    io:println(subject);\n}\n```\n</CODE>\n\n<TESTS>\n```ballerina\nimport ballerina/test;\n\n@test:Config {}\nfunction testClassifyTradeDocument() {\n    string name = \"International Trade Agreement\";\n    string text = \"This document discusses trade policies, export regulations, and import tariffs for goods across borders.\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 3, \"Should classify trade document as subject 3\");\n}\n\n@test:Config {}\nfunction testClassifyTechnicalDocument() {\n    string name = \"Software Development Process\";\n    string text = \"The system uses advanced algorithms and data structures. The program includes database functionality and network protocols.\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 2, \"Should classify technical document as subject 2\");\n}\n\n@test:Config {}\nfunction testClassifyAdministrativeDocument() {\n    string name = \"Government Policy Report\";\n    string text = \"The committee met to discuss new regulations and administrative procedures. Official government policy decisions were documented.\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 1, \"Should classify administrative document as subject 1\");\n}\n\n@test:Config {}\nfunction testClassifyEmptyDocument() {\n    string name = \"\";\n    string text = \"\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 1, \"Should default to subject 1 for empty document\");\n}\n\n@test:Config {}\nfunction testClassifyMixedDocument() {\n    string name = \"Commerce and Technology\";\n    string text = \"Trading systems use computer algorithms for market analysis. Business transactions are processed through software applications.\";\n    int result = classifyDocument(name, text);\n    // Should classify based on keyword frequency - could be 2 or 3\n    test:assertTrue(result >= 1 && result <= 3, \"Should return valid subject number\");\n}\n\n@test:Config {}\nfunction testCaseInsensitivity() {\n    string name = \"TRADE AGREEMENT\";\n    string text = \"EXPORT AND IMPORT OF GOODS\";\n    int result = classifyDocument(name, text);\n    test:assertEquals(result, 3, \"Should handle uppercase text correctly\");\n}\n```\n</TESTS>",
      "code": "// Reasoning:\n// Since this is a document classification problem without access to training data or ML libraries,\n// we'll implement a keyword-based heuristic classifier.\n// \n// Strategy:\n// 1. Read the document (id, name, and text)\n// 2. Combine name and text for analysis\n// 3. Convert to lowercase for case-insensitive matching\n// 4. Count keywords associated with each subject\n// 5. Return the subject with highest keyword score\n//\n// Subject hints from problem:\n// - Subject 3: trade/commerce related\n// - Subjects 1 & 2: we'll infer from common document patterns\n//\n// We'll use keyword scoring where each keyword match adds to that subject's score\n\nimport ballerina/io;\nimport ballerina/regex;\n\n// Function to classify a document based on its content\n// Returns an integer from 1 to 3 representing the subject\nfunction classifyDocument(string documentName, string documentText) returns int {\n    // Combine name and text for analysis\n    string fullContent = (documentName + \" \" + documentText).toLowerAscii();\n    \n    // Define keyword sets for each subject\n    // Subject 3: Trade/Commerce keywords\n    string[] subject3Keywords = [\n        \"trade\", \"trading\", \"export\", \"import\", \"commerce\", \"merchant\", \n        \"goods\", \"commodity\", \"tariff\", \"customs\", \"shipping\", \"cargo\",\n        \"business\", \"market\", \"sell\", \"buy\", \"price\", \"cost\", \"profit\",\n        \"customer\", \"supplier\", \"contract\", \"deal\", \"transaction\"\n    ];\n    \n    // Subject 2: Technical/Science keywords\n    string[] subject2Keywords = [\n        \"system\", \"data\", \"method\", \"process\", \"analysis\", \"research\",\n        \"technology\", \"computer\", \"algorithm\", \"function\", \"program\",\n        \"experiment\", \"scientific\", \"study\", \"theory\", \"technical\",\n        \"development\", \"software\", \"application\", \"database\", \"network\"\n    ];\n    \n    // Subject 1: General/Administrative keywords\n    string[] subject1Keywords = [\n        \"policy\", \"government\", \"law\", \"regulation\", \"administration\",\n        \"office\", \"department\", \"committee\", \"report\", \"document\",\n        \"public\", \"official\", \"council\", \"management\", \"organization\",\n        \"meeting\", \"decision\", \"authority\", \"procedure\", \"standard\"\n    ];\n    \n    // Calculate scores for each subject\n    int score1 = calculateKeywordScore(fullContent, subject1Keywords);\n    int score2 = calculateKeywordScore(fullContent, subject2Keywords);\n    int score3 = calculateKeywordScore(fullContent, subject3Keywords);\n    \n    // Return subject with highest score\n    if score3 >= score2 && score3 >= score1 && score3 > 0 {\n        return 3;\n    } else if score2 >= score1 && score2 > 0 {\n        return 2;\n    } else {\n        return 1; // Default to subject 1\n    }\n}\n\n// Helper function to count keyword occurrences\nfunction calculateKeywordScore(string content, string[] keywords) returns int {\n    int score = 0;\n    foreach string keyword in keywords {\n        // Count occurrences of each keyword\n        string[] parts = regex:split(content, keyword);\n        int occurrences = parts.length() - 1;\n        score = score + occurrences;\n    }\n    return score;\n}\n\npublic function main() returns error? {\n    // Read document ID\n    string? idLine = io:readln(\"Enter document ID: \");\n    if idLine is () {\n        io:println(\"Error: Failed to read document ID\");\n        return;\n    }\n    \n    // Read document name\n    string? nameLine = io:readln(\"Enter document name: \");\n    if nameLine is () {\n        io:println(\"Error: Failed to read document name\");\n        return;\n    }\n    \n    // Read document text (all remaining lines)\n    string documentText = \"\";\n    while true {\n        string|io:Error textLine = io:readln(\"\");\n        if textLine is io:Error {\n            // End of input\n            break;\n        }\n        if textLine == \"\" && documentText.length() == 0 {\n            // Skip empty lines at the beginning\n            continue;\n        }\n        documentText = documentText + textLine + \" \";\n    }\n    \n    // Classify the document\n    int subject = classifyDocument(nameLine, documentText);\n    \n    // Output the result\n    io:println(subject);\n}",
      "tests_passed": 0,
      "tests_total": 0,
      "tests_pass_rate": 0.0,
      "validation_msg": "Code compiles (no test cases)",
      "error": null,
      "error_details": {}
    }
  ],
  "total_attempts": 1,
  "timestamp": "2026-01-05T02:19:24.227496"
}